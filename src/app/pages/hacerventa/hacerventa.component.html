
<div>
<tui-stepper
    orientation="horizontal"
    [activeItemIndex]="1"
>
    <button
        *ngFor="let step of steps"
        tuiStep
        type="button"
        (click)="selectStep(step)"
    >
        {{ step }}
    </button>
</tui-stepper>

<div *ngIf="selectCurrentStep() === 'Start Up'">
 <table
    tuiTable
    [size]="size"
    [style.width.rem]="58"
>
    <thead>
        <tr>
           
            <th tuiTh>Title</th>
            <th tuiTh>Cell</th>
            <th tuiTh>Status</th>
            <th
                tuiTh
                [style.width.rem]="10"
            >
                Items
            </th>
            <th tuiTh>Progress</th>
            <th tuiTh>Actions</th>
        </tr>
    </thead>
    <tbody tuiTbody>
        <tr *ngFor="let item of data">
            
            <td tuiTd>
                <div [tuiCell]="size">
                    <span tuiTitle>
                        <span tuiStatus>
                            <tui-icon [icon]="item.title.icon" />
                            {{ item.title.title }}
                            <tui-chip *ngIf="item.title.chip && item.title.subtitle">{{ item.title.chip }}</tui-chip>
                        </span>
                        <tui-chip *ngIf="!item.title.subtitle && item.title.chip; else subtitle">
                            {{ item.title.chip }}
                        </tui-chip>
                        <ng-template #subtitle>
                            <span tuiSubtitle>
                                {{ item.title.subtitle }}
                            </span>
                        </ng-template>
                    </span>
                </div>
            </td>
            <td tuiTd>
                <div [tuiCell]="size">
                    <tui-avatar
                        [src]="item.cell.name"
                        [style.background]="item.cell.name"
                    />
                    <span tuiTitle>
                        {{ item.cell.name }}
                        <span tuiSubtitle>{{ item.cell.email }}</span>
                    </span>
                </div>
            </td>
            <td tuiTd>
                <span [tuiStatus]="item.status.color">{{ item.status.value }}</span>
            </td>
            <td tuiTd>
                <tui-items-with-more [style.gap.rem]="0.25">
                    <ng-container *ngFor="let chip of item.items">
                        <tui-badge *tuiItem>{{ chip }}</tui-badge>
                    </ng-container>
                    <ng-template
                        let-number
                        tuiMore
                    >
                        <button
                            appearance="action-grayscale"
                            tuiDropdownAlign="right"
                            tuiDropdownOpen
                            tuiLink
                            type="button"
                            
                            [tuiDropdown]="dropdown"
                        >
                            + {{ item.items.length - number - 1 }}
                        </button>
                        <ng-template #dropdown>
                            <div
                                tuiStatus
                                [style.padding.rem]="1"
                            >
                                <ng-container *ngFor="let chip of item.items; let index = index">
                                    <tui-badge *ngIf="index > number">{{ chip }}</tui-badge>
                                </ng-container>
                            </div>
                        </ng-template>
                    </ng-template>
                </tui-items-with-more>
            </td>
            <td tuiTd>
                <span tuiStatus>
                    <progress
                        tuiProgressBar
                        [style.width.rem]="6"
                        [value]="item.progress / 100"
                    ></progress>
                    {{ item.progress }}ms
                </span>
            </td>
            <td tuiTd>
                <span tuiStatus>
                    <button
                        appearance="action"
                        iconStart="@tui.pencil"
                        size="xs"
                        tuiIconButton
                        type="button"
                    >
                        Edit
                    </button>
                    <button
                        appearance="action"
                        iconStart="@tui.ellipsis"
                        size="xs"
                        tuiIconButton
                        type="button"
                    >
                        More
                    </button>
                </span>
            </td>
        </tr>
    </tbody>
</table>

	<p>
    <button
        tuiButton
        type="button"
        (click)="open.set(true)"
    >
        Show
    </button>
</p>
<ng-template #bar>
    <tui-app-bar>
        <button
            tuiButton
            tuiSlot="left"
            type="button"
            (click)="open.set(false)"
        >
            Close
        </button>
        Search contacts
    </tui-app-bar>
    <input
        placeholder="Search contacts"
        tuiSearch
        type="search"
        class="input"
        [(ngModel)]="search"
    />
</ng-template>
<ng-template
    [tuiSheetDialog]="open()"
    [tuiSheetDialogOptions]="{label: bar, bar: false}"
    (tuiSheetDialogChange)="open.set($event)"
>
    <div class="favorites">
        <tui-avatar-labeled
            *ngFor="let item of items | slice: 0 : 6"
            [label]="item.name"
        >
            <tui-avatar [src]="item.avatar | tuiFallbackSrc: '@tui.user' | async" />
        </tui-avatar-labeled>
    </div>
    <div class="items">
        <button
            *ngFor="let item of items | tuiFilter: filter : search"
            tuiCell
            type="button"
            class="cell"
            (click)="open.set(false)"
        >
            <tui-avatar [src]="item.avatar | tuiFallbackSrc: '@tui.user' | async" />
            <span tuiTitle>
                <span tuiFade>{{ item.name }}</span>
                <span tuiSubtitle>{{ item.email }}</span>
            </span>
        </button>
    </div>
    <button
        tuiButton
        type="button"
        class="button"
        (click)="open.set(false)"
    >
        Add contact
    </button>
</ng-template>

</div>

<div *ngIf="selectCurrentStep() === 'Cash In'">

<form [formGroup]="ventaForm" class="form-container">
  <div class="form-grid">
    <!-- Input DNI / RUC con botón Buscar -->
    <div class="input-with-button">
      <mat-form-field appearance="outline" class="rounded-input">
        <input matInput type="text" formControlName="dniRuc" placeholder="DNI o RUC">
      </mat-form-field>
      <button mat-raised-button color="primary" (click)="buscarCliente()">Buscar</button>
    </div>

    <!-- Dropdown Clientes (NO EDITABLE) -->
    <mat-form-field appearance="outline" class="rounded-input">
      <mat-select formControlName="cliente" placeholder="Seleccionar Cliente">
        <mat-option *ngFor="let cliente of clientes" [value]="cliente.documento">
          {{ cliente.documento }} - {{ cliente.nombre }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Dropdown Método de Pago -->
    <mat-form-field appearance="outline" class="rounded-input">
      <mat-select formControlName="metodoPago" placeholder="Método de Pago">
        <mat-option value="YAPE">YAPE</mat-option>
        <mat-option value="EFECTIVO">EFECTIVO</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Dropdown Forma de Pago -->
    <mat-form-field appearance="outline" class="rounded-input">
      <mat-select formControlName="formaPago" placeholder="Forma de Pago">
        <mat-option value="AL CONTADO">AL CONTADO</mat-option>
        
      </mat-select>
    </mat-form-field>

    <!-- Dropdown Tipo de Comprobante -->
    <mat-form-field appearance="outline" class="rounded-input">
      <mat-select formControlName="tipoComprobante" placeholder="Tipo de Comprobante">
        <mat-option value="FACTURA">FACTURA</mat-option>
        <mat-option value="BOLETA">BOLETA</mat-option>
        
      </mat-select>
    </mat-form-field>
  </div>

  <div class="button-container">
    <button mat-raised-button color="primary" class="rounded-button" (click)="imprimirJSON()">Imprimir JSON</button>
  </div>
</form> 
</div>

<div *ngIf="selectCurrentStep() === 'Sell Out'">
  Contenido de Sell Out
</div>








</div>


<!---  Table for producto for purchase -->

